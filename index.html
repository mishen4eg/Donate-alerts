<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Donate Alerts</title>
<style>
body {
    margin: 0;
    background: transparent;
    overflow: hidden;
    font-family: Arial, sans-serif;
}
#alert {
    position: absolute;
    top: 40%;
    width: 100%;
    text-align: center;
    display: none;
    color: white;
    text-shadow: 0 0 10px black;
}
#name {
    font-size: 36px;
    font-weight: bold;
}
#amount {
    font-size: 28px;
    color: gold;
}
#message {
    font-size: 24px;
    margin-top: 10px;
}
img {
    width: 200px;
}
</style>
</head>
<body>

<div id="alert">
    <img src="https://media.giphy.com/media/26ufdipQqU2lhNA4g/giphy.gif">
    <div id="name"></div>
    <div id="amount"></div>
    <div id="message"></div>
</div>

<script>
const alertBox = document.getElementById("alert");

function showDonate(name, amount, message) {
    document.getElementById("name").innerText = name + " Ð·Ð°Ð´Ð¾Ð½Ð°Ñ‚Ð¸Ð»!";
    document.getElementById("amount").innerText = amount + " â­";
    document.getElementById("message").innerText = message;

    alertBox.style.display = "block";

    // TTS
    let speech = new SpeechSynthesisUtterance(
        name + " Ð·Ð°Ð´Ð¾Ð½Ð°Ñ‚Ð¸Ð» " + amount + " Ð·Ð²ÐµÐ·Ð´. " + message
    );
    speech.lang = "ru-RU";
    speechSynthesis.speak(speech);

    setTimeout(() => {
        alertBox.style.display = "none";
    }, 7000);
}

// ðŸ”´ ÐŸÐžÐ›Ð£Ð§Ð•ÐÐ˜Ð• Ð”ÐžÐÐÐ¢ÐžÐ’
const socket = new WebSocket("ws://localhost:8765");

socket.onmessage = (event) => {
    const data = JSON.parse(event.data);
    showDonate(data.name, data.amount, data.message);
};
</script>

</body>
</html>
